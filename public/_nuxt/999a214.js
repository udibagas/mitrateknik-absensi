(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4],{447:function(t,e,r){var content=r(502);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(67).default)("53f58df0",content,!0,{sourceMap:!1})},501:function(t,e,r){"use strict";r(447)},502:function(t,e,r){var n=r(66)(!1);n.push([t.i,".echarts[data-v-4e08177a],.image[data-v-4e08177a]{width:100%}.echarts[data-v-4e08177a]{height:477px}",""]),t.exports=n},580:function(t,e,r){"use strict";r.r(e);var n=r(4),o=(r(49),r(50),r(250),r(42),r(505),r(412)),l=r(579),c=(r(578),r(577),r(582),{components:{"v-chart":l.a},props:["person","period","show"],watch:{person:function(t,e){this.requestData()},period:function(t,e){this.date=this.period,this.requestData()}},data:function(){return{url:"/api/absensi",date:null,loading:!1,tableData:[],prodPercentAvg:0,prodHourAvg:0,chartOption:{tooltip:{trigger:"axis"},grid:{bottom:"30px",containLabel:!0},title:{text:"GRAFIK PRODUKTIFITAS PEGAWAI",x:"center"},xAxis:{type:"category",boundaryGap:!0,data:[]},yAxis:{type:"value",name:"Jam Kerja"},series:[{type:"line",name:"Jam Kerja",label:{show:!0,position:"top",formatter:function(t){var e=t.name.split("\n")[0],r=5===this.$moment(e).day()?7:8;return t.value+" jam\n"+(t.value/r*100).toFixed(2)+"%"}},data:[]}]}}},methods:{requestData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.$get(t.url,{params:{date:t.date,pin:t.person.pin}});case 3:t.tableData=e.sent,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},exportData:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loading=!0,r.next=3,e.$axios.$get(e.url,{params:{date:e.date,pin:e.person.pin}});case 3:data=r.sent,Object(o.a)({data:data,fileName:t,exportType:"xls"}),e.loading=!1;case 6:case"end":return r.stop()}}),r)})))()}}}),d=(r(501),r(22)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.show,width:"95%",center:"",title:"DETAIL ABSENSI","before-close":function(e){return t.$emit("close")}},on:{"update:visible":function(e){t.show=e}}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-card",{attrs:{"body-style":{padding:"14px"}}},[r("img",{staticClass:"image",attrs:{src:t.person.photo_path}}),t._v(" "),r("div",{staticClass:"text-center",staticStyle:{padding:"14px"}},[r("h4",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.person.name)+" "+t._s(t.person.last_name)+"\n\t\t\t\t\t")]),t._v(" "),r("span",{staticStyle:{"font-size":"1.5em"}},[t._v(t._s(t.person.pin))]),r("br"),t._v(" "),r("span",[t._v("Dep. :\n\t\t\t\t\t\t"+t._s(t.person.department?t.person.department.name:""))]),t._v(" "),r("h4",{staticClass:"text-center",staticStyle:{"border-top":"1px solid #ddd","border-bottom":"1px solid #ddd",padding:"20px 0"}},[t._v("\n\t\t\t\t\t\tPRODUKTIFITAS RATA - RATA\n\t\t\t\t\t")]),t._v(" "),r("div",{class:["text-center",t.prodPercentAvg>=90?"text-success":t.prodPercentAvg>=60?"text-warning":"text-danger"]},[r("el-row",[r("el-col",{staticStyle:{"border-right":"1px solid #eee"},attrs:{span:12}},[r("h2",[t._v(t._s(t.prodHourAvg)+" jam")])]),t._v(" "),r("el-col",{attrs:{span:12}},[r("h2",[t._v(t._s(t.prodPercentAvg)+"%")])])],1)],1)])])],1),t._v(" "),r("el-col",{attrs:{span:18}},[r("v-chart",{staticClass:"echarts",attrs:{options:t.chartOption}})],1)],1),t._v(" "),r("el-form",{staticStyle:{float:"right",clear:"both"},attrs:{inline:""}},[r("el-form-item",[r("el-date-picker",{staticStyle:{width:"280px","margin-top":"5px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd",format:"dd/MMM/yyyy","range-separator":"-","start-placeholder":"Dari Tanggal","end-placeholder":"Sampai Tanggal",size:"small"},on:{change:t.requestData},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"small",icon:"el-icon-download",type:"primary"},on:{click:t.exportData}},[t._v("\n\t\t\t\tEXPORT KE EXCEL\n\t\t\t")])],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{stripe:"",data:t.tableData}},[r("el-table-column",{attrs:{type:"index",width:"50",label:"#"}}),t._v(" "),r("el-table-column",{attrs:{prop:"att_date",label:"Tanggal",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t.$moment(e.row.att_date).format("DD/MMM/YYYY"))+" "),r("br"),t._v("\n\t\t\t\t"+t._s(t.$moment(e.row.att_date).format("dddd"))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"first_in",label:"Masuk",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{label:"Jam Istirahat",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n\t\t\t\t"+t._s(n.rest_start)+" - "+t._s(n.rest_end)+" "),r("br")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Durasi Istirahat",prop:"rest_duration",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"last_out",label:"Pulang",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"work_duration",label:"Jam Kerja Efektif",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"percentage",label:"%",sortable:"",align:"right","header-align":"right"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v("\n\t\t\t\t"+t._s(r.percentage.toFixed(2))+"\n\t\t\t")]}}])})],1)],1)}),[],!1,null,"4e08177a",null);e.default=component.exports},587:function(t,e,r){"use strict";var n=r(3),o=r(86).find,l=r(177),c="find",d=!0;c in[]&&Array(1).find((function(){d=!1})),n({target:"Array",proto:!0,forced:d},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l(c)},708:function(t,e,r){"use strict";r.r(e);r(37),r(27),r(36),r(47),r(28),r(48);var n=r(4),o=r(17),l=(r(49),r(587),r(412)),c=r(81);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={computed:f({},Object(c.b)(["persons","departments"])),mounted:function(){this.requestData()},data:function(){return{url:"/api/absensi",dialog:!1,tableData:[],selectedData:{},loading:!1,filters:{date:[this.$moment().format("YYYY-MM-DD"),this.$moment().format("YYYY-MM-DD")],keyword:""}}},methods:{showDetail:function(t){this.selectedData=this.persons.find((function(p){return p.pin===t.pin})),this.dialog=!0},refreshData:function(){this.filters={date:[this.$moment().format("YYYY-MM-DD"),this.$moment().format("YYYY-MM-DD")],keyword:""},this.requestData()},requestData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.$get(t.url,{params:f({},t.filters)});case 3:t.tableData=e.sent,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},exportData:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loading=!0,r.next=3,e.$axios.$get(e.url,{params:f(f({},e.filters),{},{action:"export"})});case 3:data=r.sent,Object(l.a)({data:data,fileName:t,exportType:"xls"}),e.loading=!1;case 6:case"end":return r.stop()}}),r)})))()}}},v=r(22),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",[r("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[r("div",{staticStyle:{"font-size":"1.2em","line-height":"41px"}},[t._v("ABSENSI")]),t._v(" "),r("el-form",{attrs:{inline:""}},[r("el-form-item",[r("el-date-picker",{staticStyle:{"margin-top":"5px",width:"240px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd",format:"dd/MMM/yyyy","range-separator":"-","start-placeholder":"Dari Tanggal","end-placeholder":"Sampai Tanggal",size:"small",clearable:!1},on:{change:t.requestData},model:{value:t.filters.date,callback:function(e){t.$set(t.filters,"date",e)},expression:"filters.date"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-download",type:"primary",size:"small"},on:{click:function(e){return t.exportData("absensi")}}},[t._v("EXPORT KE EXCEL")])],1),t._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"Cari Pegawai","prefix-icon":"el-icon-search",size:"small",clearable:""},on:{change:t.requestData},model:{value:t.filters.keyword,callback:function(e){t.$set(t.filters,"keyword",e)},expression:"filters.keyword"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-refresh",size:"small",type:"primary"},on:{click:t.refreshData}})],1)],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{stripe:"",data:t.tableData,height:"calc(100vh - 190px)"},on:{"row-dbclick":function(e){return t.showDetail(e)}}},[r("el-table-column",{attrs:{type:"index",width:"50",label:"#"}}),t._v(" "),r("el-table-column",{attrs:{prop:"att_date",label:"Tanggal",sortable:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v("\n\t\t\t\t"+t._s(t.$moment(n.att_date).format("DD/MMM/YYYY"))+" "),r("br"),t._v("\n\t\t\t\t"+t._s(t.$moment(n.att_date).format("dddd"))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"fullname",label:"Nama",sortable:"","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showDetail(n)}}},[t._v("\n\t\t\t\t\t"+t._s(n.fullname)+"\n\t\t\t\t")]),t._v(" "),r("br"),t._v("\n\t\t\t\tNIK : "+t._s(n.pin)+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"dept_name",label:"Departemen",filters:t.departments.map((function(t){return{value:t.name,text:t.name}})),sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"first_in",label:"Masuk",sortable:"",width:"95"}}),t._v(" "),r("el-table-column",{attrs:{label:"Jam Istirahat",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v("\n\t\t\t\t"+t._s(r.rest_start)+" - "+t._s(r.rest_end)+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"Durasi Istirahat",prop:"rest_duration",sortable:"",width:"150"}}),t._v(" "),r("el-table-column",{attrs:{prop:"last_out",label:"Pulang",sortable:"",width:"95"}}),t._v(" "),r("el-table-column",{attrs:{prop:"work_duration",label:"Jam Kerja Efektif",width:"160",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"percentage",label:"%",width:"70",sortable:"",align:"right","header-align":"right"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._v("\n\t\t\t\t"+t._s(r.percentage.toFixed(2))+"\n\t\t\t")]}}])})],1),t._v(" "),t.dialog?r("AbsensiPegawai",{attrs:{show:t.dialog,person:t.selectedData,period:t.filters.date},on:{close:function(e){t.dialog=!1}}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AbsensiPegawai:r(580).default})}}]);