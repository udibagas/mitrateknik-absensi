(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4],{446:function(t,e,r){var content=r(502);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(67).default)("16df205e",content,!0,{sourceMap:!1})},501:function(t,e,r){"use strict";r(446)},502:function(t,e,r){var n=r(66)(!1);n.push([t.i,".echarts[data-v-7e6c86d5],.image[data-v-7e6c86d5]{width:100%}.echarts[data-v-7e6c86d5]{height:477px}",""]),t.exports=n},579:function(t,e,r){"use strict";r.r(e);r(49),r(250),r(42),r(470),r(416);var n=r(578),o=(r(577),r(576),r(581),{components:{"v-chart":n.a},props:["person","period"],watch:{person:function(t,e){this.requestData()}},data:function(){return{url:"/api/absensi",filters:{person_pin:this.person.pin},exportLabelBtn:"EXPORT KE EXCEL",prodPercentAvg:0,prodHourAvg:0,chartOption:{tooltip:{trigger:"axis"},grid:{bottom:"30px",containLabel:!0},title:{text:"GRAFIK PRODUKTIFITAS PEGAWAI",x:"center"},xAxis:{type:"category",boundaryGap:!0,data:[]},yAxis:{type:"value",name:"Jam Kerja"},series:[{type:"line",name:"Jam Kerja",label:{show:!0,position:"top",formatter:function(t){var e=t.name.split("\n")[0],r=5===moment(e).day()?7:8;return t.value+" jam\n"+(t.value/r*100).toFixed(2)+"%"}},data:[]}]}}}}),l=(r(501),r(22)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("el-card",{attrs:{"body-style":{padding:"14px"}}},[r("img",{staticClass:"image",attrs:{src:t.base_url+"/img/user-"+(t.person.gender?t.person.gender.toLowerCase():"")+".png"}}),t._v(" "),r("div",{staticClass:"text-center",staticStyle:{padding:"14px"}},[r("h4",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.person.name)+" "+t._s(t.person.last_name)+"\n\t\t\t\t\t")]),t._v(" "),r("span",{staticStyle:{"font-size":"1.5em"}},[t._v(t._s(t.person.pin))]),r("br"),t._v(" "),r("span",[t._v("Dep. :\n\t\t\t\t\t\t"+t._s(t.person.department?t.person.department.name:""))]),t._v(" "),r("hr"),t._v(" "),r("h6",{staticClass:"text-center"},[t._v("PRODUKTIFITAS RATA - RATA")]),t._v(" "),r("hr"),t._v(" "),r("div",{class:["text-center",t.prodPercentAvg>=90?"text-success":t.prodPercentAvg>=60?"text-warning":"text-danger"]},[r("el-row",[r("el-col",{staticStyle:{"border-right":"1px solid #eee"},attrs:{span:12}},[r("h3",[t._v(t._s(t.prodHourAvg)+" jam")])]),t._v(" "),r("el-col",{attrs:{span:12}},[r("h3",[t._v(t._s(t.prodPercentAvg)+"%")])])],1)],1)])])],1),t._v(" "),r("div",{staticClass:"col-md-9"},[r("v-chart",{staticClass:"echarts",attrs:{options:t.chartOption}})],1)]),t._v(" "),r("hr"),t._v(" "),r("el-form",{staticStyle:{float:"right",clear:"both"},attrs:{inline:!0}},[r("el-form-item",[r("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",format:"dd-MMM-yyyy","range-separator":"-","start-placeholder":"Dari Tanggal","end-placeholder":"Sampai Tanggal"},on:{change:t.searchData},model:{value:t.filters.dateRange,callback:function(e){t.$set(t.filters,"dateRange",e)},expression:"filters.dateRange"}})],1),t._v(" "),r("el-form-item",{staticStyle:{"padding-right":"0","margin-right":"0"}},[r("el-button",{attrs:{type:"primary"},on:{click:t.exportToExcel}},[r("i",{staticClass:"el-icon-document"}),t._v(" "+t._s(t.exportLabelBtn))])],1)],1),t._v(" "),r("el-table",{attrs:{data:t.tableData,stripe:""}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),r("el-table-column",{attrs:{prop:"absence_date",label:"Tanggal",sortable:"",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{prop:"hari",label:"Hari",sortable:"",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{prop:"first_in",label:"Masuk",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{label:"Jam Istirahat",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(e.row.rest_start)+" - "+t._s(e.row.rest_end)+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"istirahat",label:"Lama Istirahat",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.secToTime(e.row.istirahat)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"last_out",label:"Pulang",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"jam_kerja_efektif",label:"Jam Kerja Efektif",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t.secToTime(e.row.jam_kerja_efektif))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"persentase",label:"%",sortable:"",width:"70"}})],1)],1)}),[],!1,null,"7e6c86d5",null);e.default=component.exports},586:function(t,e,r){"use strict";var n=r(3),o=r(86),l=r(24),c=r(14),f=r(8),m=r(5),d=r(587),_=r(177),v=r(588),h=r(589),k=r(85),y=r(590),w=[],x=w.sort,j=m((function(){w.sort(void 0)})),D=m((function(){w.sort(null)})),H=_("sort"),P=!m((function(){if(k)return k<70;if(!(v&&v>3)){if(h)return!0;if(y)return y<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)w.push({k:t+r,v:e})}for(w.sort((function(a,b){return b.v-a.v})),r=0;r<w.length;r++)t=w[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:j||!D||!H||!P},{sort:function(t){void 0!==t&&o(t);var e=l(this);if(P)return void 0===t?x.call(e):x.call(e,t);var r,n,m=[],_=c(e.length);for(n=0;n<_;n++)n in e&&m.push(e[n]);for(r=(m=d(m,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:f(e)>f(r)?1:-1}}(t))).length,n=0;n<r;)e[n]=m[n++];for(;n<_;)delete e[n++];return e}})},587:function(t,e){var r=Math.floor,n=function(t,e){var c=t.length,f=r(c/2);return c<8?o(t,e):l(n(t.slice(0,f),e),n(t.slice(f),e),e)},o=function(t,e){for(var element,r,n=t.length,i=1;i<n;){for(r=i,element=t[i];r&&e(t[r-1],element)>0;)t[r]=t[--r];r!==i++&&(t[r]=element)}return t},l=function(t,e,r){for(var n=t.length,o=e.length,l=0,c=0,f=[];l<n||c<o;)l<n&&c<o?f.push(r(t[l],e[c])<=0?t[l++]:e[c++]):f.push(l<n?t[l++]:e[c++]);return f};t.exports=n},588:function(t,e,r){var n=r(68).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},589:function(t,e,r){var n=r(68);t.exports=/MSIE|Trident/.test(n)},590:function(t,e,r){var n=r(68).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},591:function(t,e,r){"use strict";var n=r(3),o=r(592).start;n({target:"String",proto:!0,forced:r(593)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},592:function(t,e,r){var n=r(14),o=r(8),l=r(249),c=r(20),f=Math.ceil,m=function(t){return function(e,r,m){var d,_,v=o(c(e)),h=v.length,k=void 0===m?" ":o(m),y=n(r);return y<=h||""==k?v:(d=y-h,(_=l.call(k,f(d/k.length))).length>d&&(_=_.slice(0,d)),t?v+_:_+v)}};t.exports={start:m(!1),end:m(!0)}},593:function(t,e,r){var n=r(68);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},594:function(t,e,r){"use strict";var n=r(3),o=r(87).find,l=r(176),c="find",f=!0;c in[]&&Array(1).find((function(){f=!1})),n({target:"Array",proto:!0,forced:f},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l(c)},715:function(t,e,r){"use strict";r.r(e);r(37),r(27),r(47),r(48);var n=r(17),o=(r(586),r(50),r(36),r(88),r(89),r(69),r(84),r(591),r(10),r(70),r(594),r(28),r(470),r(81));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var c={computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({sortedData:function(){return this.absensis.sort((function(a,b){return a.jam_kerja_efektif>b.jam_kerja_efektif?1:a.jam_kerja_efektif<b.jam_kerja_efektif?-1:0}))},pegawaiProduktif:function(){return this.sortedData.filter((function(s){return s.jam_kerja_efektif>=28800})).slice(-5).reverse()},pegawaiTidakProduktif:function(){return this.sortedData.filter((function(s){return s.jam_kerja_efektif<28800})).slice(0,5)},filteredData:function(){var t=this;return this.absensis.filter((function(a){return a.nik_var.includes(t.keyword)||a.name_var.toLowerCase().includes(t.keyword.toLowerCase())}))}},Object(o.b)(["persons","departments"])),data:function(){return{exportLabelBtn:"EXPORT KE EXCEL",absensis:[],filterDate:[moment().format("YYYY-MM-DD"),moment().format("YYYY-MM-DD")],keyword:"",loading:!1,prodPercentAvg:0,prodHourAvg:0,absensiPegawaiDialog:!1,selectedPerson:{},requestInterval:null,requestIntervalTime:1e4,isRequesting:!1,timeslots:[]}},watch:{filterDate:function(t,e){clearInterval(this.requestInterval),this.requestData(),this.requestInterval=setInterval(this.requestData,this.requestIntervalTime)}},methods:{filterDepartment:function(t,e,r){return e[r.property]===t},getDayName:function(t){return this.hari[moment(t).day()]},getDuration:function(t,e){var s=moment(t,"HH:mm:ss"),r=moment(e,"HH:mm:ss");return moment.duration(r.diff(s)).asSeconds()},secToTime:function(t){if(t){var e=Math.floor(t/3600),r=Math.floor(t%3600/60),s=t%60;return"".concat(e.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))}return""},showAbsensiPegawai:function(t){this.selectedPerson=this.persons.find((function(p){return p.pin===t.nik_var})),this.absensiPegawaiDialog=!0},requestData:function(){var t=this;if(!this.isRequesting){this.loading=!0;var e={date:this.filterDate[0],date_end:this.filterDate[1],api_token:USER.api_token};axios.get(API_URL+"/absensi",{params:e}).then((function(e){t.loading=!1,t.isRequesting=!1,t.absensis=e.data;var r=0,n=0;t.absensis.forEach((function(a){var e=moment(a.absence_date).day();a.rest_start||(a.rest_start=t.timeslots[e].rest_start),a.rest_end||(a.rest_end=t.timeslots[e].rest_end),a.istirahat=t.getDuration(a.rest_start,a.rest_end);var o=36*t.timeslots[e].jam_kerja_max;if(a.jam_kerja_efektif=0,a.persentase=0,a.first_in&&a.last_out){var l=moment(a.first_in,"HH:mm:ss")<moment(t.timeslots[e].in,"HH:mm:ss")?moment(t.timeslots[e].in,"HH:mm:ss"):moment(a.first_in,"HH:mm:ss"),c=moment(a.last_out,"HH:mm:ss")>=moment(t.timeslots[e].out,"HH:mm:ss")?moment(t.timeslots[e].out,"HH:mm:ss"):moment(a.last_out,"HH:mm:ss"),f=t.getDuration(l,c),m=moment(a.rest_start,"HH:mm:ss")>=moment(t.timeslots[e].rest_start,"HH:mm")?moment(t.timeslots[e].rest_start,"HH:mm:ss"):moment(a.rest_start,"HH:mm:ss"),d=moment(a.rest_end,"HH:mm:ss")<moment(t.timeslots[e].rest_end,"HH:mm")?moment(t.timeslots[e].rest_end,"HH:mm:ss"):moment(a.rest_end,"HH:mm:ss"),_=t.getDuration(m,d);a.jam_kerja_efektif=f-_,a.persentase=(a.jam_kerja_efektif/o).toFixed(2),r+=parseFloat(a.persentase),n+=a.jam_kerja_efektif}})),r>0&&(t.prodPercentAvg=(r/t.absensis.length).toFixed(2)),n>0&&(t.prodHourAvg=(n/3600/t.absensis.length).toFixed(2))})).catch((function(e){t.loading=!1,t.isRequesting=!1,console.log(e)}))}},exportToExcel:function(){var t=this,data=[];this.exportLabelBtn="Menyiapkan File...",this.absensis.forEach((function(a){data.push({Tanggal:a.absence_date,Hari:t.getDayName(a.absence_date),NIK:a.nik_var,Nama:a.name_var,Masuk:a.first_in||"",Jam_Istirahat:"".concat(a.rest_start," - ").concat(a.rest_end),Lama_Istirahat:t.secToTime(a.istirahat),Pulang:a.last_out||"",Jam_Kerja_Efektif:t.secToTime(a.jam_kerja_efektif),Persentase:a.persentase})}));exportFromJSON({data:data,fileName:"absensi.xls",exportType:"xls"}),this.exportLabelBtn="EXPORT KE EXCEL"},getTimeSlots:function(){var t=this,e={api_token:USER.api_token};axios.get(API_URL+"/timeSlot",{params:e}).then((function(e){e.data.forEach((function(e){t.timeslots[e.day]=e}))}))}},created:function(){this.getTimeSlots(),this.requestData(),this.requestInterval=setInterval(this.requestData,this.requestIntervalTime),this.$store.commit("getPersons")},destroyed:function(){clearInterval(this.requestInterval)}},f=r(22),component=Object(f.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",[r("el-form",{staticStyle:{float:"right",clear:"both"},attrs:{inline:!0}},[r("el-form-item",[r("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",format:"dd-MMM-yyyy","range-separator":"-","start-placeholder":"Dari Tanggal","end-placeholder":"Sampai Tanggal"},model:{value:t.filters.date,callback:function(e){t.$set(t.filters,"date",e)},expression:"filters.date"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-download",type:"primary"},on:{click:function(e){return t.exportData("absensi")}}})],1),t._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"Cari Pegawai","prefix-icon":"el-icon-search"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:t.requestData},slot:"append"})],1)],1)],1),t._v(" "),r("el-table",{staticStyle:{"border-top":"1px solid #eee",width:"100%"},attrs:{data:t.filteredData,stripe:""}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),r("el-table-column",{attrs:{prop:"absence_date",label:"Tanggal",sortable:"",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{prop:"hari",label:"Hari",sortable:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t.getDayName(e.row.absence_date))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"nik_var",label:"NIK",sortable:"",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.showAbsensiPegawai(e.row)}}},[t._v("\n\t\t\t\t\t"+t._s(e.row.nik_var)+"\n\t\t\t\t")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"name_var",label:"Nama",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.showAbsensiPegawai(e.row)}}},[t._v("\n\t\t\t\t\t"+t._s(e.row.name_var)+"\n\t\t\t\t")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"dept_name",label:"Departemen",filters:t.departments.map((function(t){var e={};return e.text=e.value=t.name,e})),"filter-method":t.filterDepartment,sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"first_in",label:"Masuk",sortable:"",width:"90"}}),t._v(" "),r("el-table-column",{attrs:{label:"Jam Istirahat",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(e.row.rest_start)+" - "+t._s(e.row.rest_end)+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"istirahat",label:"Lama Istirahat",sortable:"",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t.secToTime(e.row.istirahat))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"last_out",label:"Pulang",sortable:"",width:"90"}}),t._v(" "),r("el-table-column",{attrs:{prop:"jam_kerja_efektif",label:"Jam Kerja Efektif",width:"160",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t"+t._s(t.secToTime(e.row.jam_kerja_efektif))+"\n\t\t\t")]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"persentase",label:"%",width:"70",sortable:""}})],1),t._v(" "),r("el-dialog",{attrs:{visible:t.absensiPegawaiDialog,width:"95%",center:!0},on:{"update:visible":function(e){t.absensiPegawaiDialog=e},close:function(e){t.selectedPerson={}}}},[r("AbsensiPegawai",{attrs:{person:t.selectedPerson,period:t.filterDate}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AbsensiPegawai:r(579).default})}}]);